<%if params.has_key?(:using_brownie_point) %>
  $("#brownie_point").html("<%= escape_javascript(render(partial: "carts/brownie_point", locals: {current_user: current_user, cart: @cart})) %>")
<% else %>
  <% if @coupon && !@coupon.errors.any? %>
    CouponUtil.removeDiscountSection();
    <% if @coupon.is_cashback_coupon? %>
      $("#total_section").after("<%= escape_javascript(render(partial: "carts/cashback", locals: {cashback: @cashback})) %>")
    <% else %>
      $("#total_section").after("<%= escape_javascript(render(partial: "carts/discount", locals: {discount: @discount})) %>")
    <% end %>
    $("#coupon_section").html("<%= escape_javascript(render(partial: "carts/coupon_section", locals: {coupon: @coupon})) %>")
  <% elsif @coupon && @coupon.errors.any? %>
    $("#messages").html("<%= escape_javascript(render(partial: "shared/alert_msg", locals: {msg: get_coupon_message_and_type(@coupon)[:message], msg_type: get_coupon_message_and_type(@coupon)[:type]})) %>")
  <% end %>
  $('#total').html("<%= @sub_total %>")
  $('#grand_total').html("<%= @grand_total %>")

  <% if quantity_changed?(params) %>
    $(".cart-text").html("<%= escape_javascript(render 'layouts/cart_text') %>")
    CartUtil.setItemQtyAndItemTotal('<%= CartItem.get_cart_item_qty_and_total_hash(@cart_items) %>')
  <% end %>
<% end %>